# Environment Variables Migration

This document explains the environment variable configuration for this template.

## Files

- **`.dev.vars`**: Development environment (automatically loaded by `wrangler dev`)
- **`.prod.vars`**: Production environment (loaded by `deploy.sh` script)
- **`deploy.sh`**: Custom deployment script that loads `.prod.vars`

## Why These Files Are Committed

Unlike typical `.dev.vars` files that contain secrets, our files only contain **public URLs** - no sensitive information. This is why they're committed to git.

## For Template Forkers

**IMPORTANT**: Update `.prod.vars` with your own production URL:

```env
APP_URL=https://your-worker-name.your-username.workers.dev
```

## Local Overrides

Create these files (gitignored) for personal development settings:
- `.dev.vars.local`
- `.prod.vars.local`

These will override the committed files.

## How It Works

### Development
```bash
pnpm dev
# → wrangler dev automatically loads .dev.vars
# → APP_URL=http://localhost:8888
```

### Production
```bash
pnpm deploy
# → deploy.sh reads .prod.vars
# → exports APP_URL as environment variable
# → wrangler deploy --var APP_URL:$APP_URL
```

## Why Not Wrangler Environments?

When using Vite's Cloudflare plugin, wrangler creates a "redirected configuration" during the build process. This means we can't use wrangler's built-in `--env` flag. Instead, we use:
- Separate `.vars` files for clarity
- Custom deploy script to load production vars

This approach is simpler and more explicit than wrangler's environment feature.
